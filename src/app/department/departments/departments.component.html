<div id="header">
    <h2>DEPARTMENTS</h2>
    <div></div>
    <button class="submit-btn"
        mat-raised-button
        (click)="toggleDialog()">
        <i class="fas fa-plus"></i> {{buttonMessage}} </button>
</div>

<erste-department-editor [@smoothInOut]="in"
    [isNew]="true"
    (refresh)="refreshDataTable()"
    *ngIf="isOpen"></erste-department-editor>

<section id="table-container">

    <mat-table #table
        [dataSource]="dataSource">
        <!-- Department Name -->
        <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef>
                <div>NAME</div>
                <div>
                    <input (input)="onFilter('departmentName',$event.target.value)"
                        type="text" />
                </div>
            </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.departmentName}} </mat-cell>
        </ng-container>

        <!-- HOD -->
        <ng-container matColumnDef="hod">
            <mat-header-cell *matHeaderCellDef>
                <div>HOD</div>
                <div>
                    <input (input)="onFilter('departmentHod',$event.target.value)"
                        type="text" />
                </div>
            </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.departmentHod}} </mat-cell>
        </ng-container>

        <!-- HOD Email -->
        <ng-container matColumnDef="hod_email">
            <mat-header-cell *matHeaderCellDef>
                <div>EMAIL</div>
                <div>
                    <input (input)="onFilter('departmentHodEmail',$event.target.value)"
                        type="text" />
                </div>
            </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.departmentHodEmail}} </mat-cell>
        </ng-container>

        <!-- Expanded Content Column - The detail row is made up of this one column -->
        <ng-container matColumnDef="expandedDetail">
            <mat-cell *matCellDef="let element">
                <erste-department-editor [department]="currentDepartment"
                    (refresh)="refreshDataTable()"></erste-department-editor>
            </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row [@smoothInOut]="in"
            *matRowDef="let row; columns: displayedColumns;"
            (click)="onRowClick(row)"></mat-row>
        <mat-row *matRowDef="let row; columns: ['expandedDetail'];when: isExpansionDetailRow"
            [@detailExpand]="row.element == currentDepartment ? 'expanded' : 'collapsed'"
            style="overflow: hidden"></mat-row>
    </mat-table>
    <div class="loader"
        [@fadeOut]=""
        *ngIf="isLoading">
        <div class="swirl"></div>
    </div>

</section>